<div class="row">
    <div class="col-sm-12">
        <div class="row mb-3">
            <div class="mb-4 col-sm-6 col-lg-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <h3 style="color:#4650dd; font-size: 1.2rem">{{ $cards[0] }} Proposition
                                </h3>
                                <p class="text-sm mb-0">Envoyés Aujourd'hui</p>
                            </div>
                            <div class="flex-shrink-0 ms-3 ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                    fill="currentColor" class="bi bi-calendar2-event" viewBox="0 0 16 16">
                                    <path
                                        d="M11 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"
                                        style="color: #4650dd" />
                                    <path
                                        d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"
                                        style="color: #4650dd" />
                                    <path
                                        d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"style="color: #4650dd" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer py-3"
                        style="background-color: #dadcf8;border-radius:  0 0 1rem 1rem; border-color: transparent;">
                        <div class="row align-items-center  justify-content-center" style="color:#4650dd ">
                            <div class="col-10">
                                <p class="mb-0">
                                    <a href="/customer/proposal" style="text-decoration: none;color: inherit;">
                                        <strong> En savoir plus </strong></a>
                                </p>
                            </div>
                            <div class="col-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15"
                                    fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path
                                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-4 col-sm-6 col-lg-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <h3 class="text-success" style="font-size: 1.25rem">{{ $cards[1] }} Confirmés
                                </h3>
                                <p class="text-sm mb-0">Aujourd'hui</p>
                            </div>
                            <div class="flex-shrink-0 ms-3 ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                    fill="currentColor" class="bi bi-calendar2-check" viewBox="0 0 16 16">
                                    <path style="color:#66bb6a"
                                        d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                                    <path style="color:#66bb6a"
                                        d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z" />
                                    <path style="color:#66bb6a"
                                        d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer py-3"
                        style="background-color: #c8e6c9; border-radius:  0 0 1rem 1rem; border-color: transparent;">
                        <div class="row align-items-center justify-content-center text-success">
                            <div class="col-10">
                                <p class="mb-0">
                                    <a href="/proposal/all" style="text-decoration: none;color: inherit;">
                                        <strong> En savoir plus </strong></a>
                                </p>
                            </div>
                            <div class="col-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15"
                                    fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path
                                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-4 col-sm-6 col-lg-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <h3 style="color:#835db4; font-size: 1.25rem">{{ $cards[2] }} Devis</h3>
                                <p class="text-sm mb-0">Signés (<span id="moisAnnee"></span>)</p>
                            </div>
                            <div class="flex-shrink-0 ms-3 ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26"
                                    fill="currentColor" class="bi bi-clipboard-check" viewBox="0 0 16 16">
                                    <path style="color:#835db4" fill-rule="evenodd"
                                        d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                                    <path style="color:#835db4"
                                        d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                    <path style="color:#835db4"
                                        d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer py-3"
                        style="background-color: #ddd6e7; border-radius:  0 0 1rem 1rem; border-color: transparent;">
                        <div class="row align-items-center justify-content-center" style="color:#835db4">
                            <div class="col-10">
                                <p class="mb-0">
                                    <a href="/sales" style="text-decoration: none;color: inherit;">
                                        <strong>En savoir plus</a></strong>
                                </p>
                            </div>
                            <div class="col-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15"
                                    fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path
                                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-4 col-sm-6 col-lg-3 mb-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <h3 style="font-size: 1.25rem" class="text-danger">{{ $cards[3] }} Absence</h3>
                                <p class="text-sm mb-0">Ce mois (<span id="mois"></span>)</p>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                fill="currentColor" class="bi bi-calendar2-x-fill" viewBox="0 0 16 16">
                                <path style="color:#DC3545"
                                    d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z" />
                                <path style="color:#DC3545"
                                    d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z" />
                            </svg>
                        </div>
                    </div>
                    <div class="card-footer py-3"
                        style="background-color: #ffe2e0; border-radius:  0 0 1rem 1rem; border-color: transparent;">
                        <div class="row align-items-center justify-content-center" style="color:#DC3545">
                            <div class="col-10">
                                <p class="mb-0">
                                    <a href="/profile/absence" style="text-decoration: none;color: inherit;">
                                        <strong>En savoir plus </strong></a>
                                </p>
                            </div>
                            <div class="col-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15"
                                    fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path
                                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-5 grid-margin" style="font-family: Segoe UI">
        <div class=" pb-4 pb-lg-2">
            <div class="h-100 card">
                <div class="d-flex card-body">
                    <div class="w-100 align-items-center row">
                        <div class="mb-4 mb-sm-0 col-sm-5">
                            <h2 class="mb-0 d-flex align-items-center"><span>{{ $cards[4] }} </span><span
                                    class="dot bg-green d-inline-block ms-3"></span></h2><span
                                class="">Pièces</span>
                            <hr><small class="text-muted">Challenge : {{ $cards[6]->first()->challenge }} DH
                            </small>
                        </div>
                        <div class="col-sm-7"><canvas width="182" height="91" id="lineChart"
                                style="display: block; box-sizing: border-box; height: 91px; width: 182px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="h-50 pt-lg-2">
            <div class="h-100 card">
                <div class="d-flex card-body" style="height: 170px">
                    <div class="w-100 align-items-center row">
                        <div class="mb-4 mb-sm-0 col-sm-5" style="margin-top:-50px;">
                            <h2 class="mb-0 d-flex align-items-center">
                                <span>{{ $cards[5] }}</span>
                                <span class="dot bg-indigo d-inline-block ms-3"></span>
                            </h2>
                            <span class="">Pièces</span>
                            @if ($cards[7]->first()->challenge != 0)
                                <hr>
                                <small class="text-muted">Primes : {{ $cards[7]->first()->challenge }} DH</small>
                            @else
                                <hr>
                                <small class="text-muted">Primes : 0 DH</small>
                            @endif
                        </div>
                        <div class="col-sm-7">
                            <canvas width="292" height="551" id="doughnutChart"
                                style="margin-top:-35px; display: block; box-sizing: border-box; height: 191px; width: 302px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-7 grid-margin">
        <div class="card">
            <div class="card-body">
                <div class="d-sm-flex justify-content-between align-items-start">
                    <h4> <strong>Production</strong> </h4><br>
                </div>
                <canvas id="salesChart" ></canvas>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12 grid-margin">
        <div class="card">
            <div class="card-body">
                <canvas id="annee"></canvas>
            </div>
        </div>
    </div>
</div> 
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var date = new Date();
        var mois = date.toLocaleString("default", {
            month: "long"
        });
        var annee = date.getFullYear();
        var moisAnnee = mois + " " + annee;

        document.getElementById("moisAnnee").textContent = moisAnnee;
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var date = new Date();
        var mois = date.toLocaleString("default", {
            month: "long"
        });
        var annee = date.getFullYear();
        var moisAnnee = mois;

        document.getElementById("mois").textContent = mois;
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function() {


        var chartData = {
            labels: ["pièces", "pièces", "pièces", "pièces"],
            datasets: [{
                data: @json($quantitySoldPerWeek),
                backgroundColor: '#a9cfab',
                borderColor: '#a9cfab',
                borderWidth: 2,
                pointRadius: 3,
                pointBackgroundColor: '#a9cfab',
                fill: false
            }]
        };

        var lineChart = new Chart(document.getElementById("lineChart"), {
            type: 'line',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: true,
                        callbacks: {
                            label: function(context) {
                                var value = context.parsed.y;
                                return value !== null ? value : '';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                }
            }
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {

        var doughnutData = {
            labels: ['Vente'],
            datasets: [{
                data: [JSON.parse('@json($cards[5])'), 100 - JSON.parse(
                    '@json($cards[5])')],
                backgroundColor: ['#a9cfab', '#E5E4E2']
            }]
        };
        var doughnutChartCanvas = document.getElementById('doughnutChart');
        var doughnutChart = new Chart(doughnutChartCanvas, {
            type: 'doughnut',
            data: doughnutData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                layout: {
                    padding: {
                        top: 10,
                        right: 10,
                        bottom: 20,
                        left: 10
                    }
                },
                elements: {
                    arc: {
                        borderWidth: 25
                    }
                },
                title: {
                    display: true,
                    text: 'Sales',
                    font: {
                        size: 20,
                        weight: 'bold'
                    }
                },
                labels: {
                    font: {
                        size: 14
                    }
                }
            }
        });
    });
</script>

<script>
    document.addEventListener('livewire:load', function() {
        var months = @json($months);
        var refusedSales = @json($refusedSales);
        var acceptedSales = @json($acceptedSales);

        var ctx = document.getElementById('salesChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: months,
                datasets: [{
                        label: 'Acceptée',
                        data: acceptedSales,
                        type: 'line',
                        borderColor: '#c2c0c0 ',
                        backgroundColor: '#c2c0c0 ',
                    },
                    {
                        label: 'Annulée',
                        data: refusedSales,
                        type: 'bar',
                        borderColor: '#e0e0e0',
                        backgroundColor: '#e0e0e0',
                    }
                ]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            font: {
                                weight: 'bold'
                            },
                        },
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false,
                        },
                    },
                    y: {
                        grid: {
                            display: false,
                        },
                    }
                }
            },
        });
    });
</script>

<script>
    document.addEventListener('livewire:load', function() {
        var months = @json($months1);
        var propoConfirme = @json($propoConfirme);
        var propoEnvoye = @json($propoEnvoye);
        var devisSigne = @json($devisSigne);

        var ctx = document.getElementById('annee').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: months,
                datasets: [{
                        label: 'Proposition',
                        data: propoEnvoye,
                        type: 'bar',
                        backgroundColor: '#e0e0e0',
                        borderColor: '#c2c0c0',
                        barThickness: 30,
                        borderWidth: 2,
                        borderRadius: 20,
                        borderSkipped: false,
                    },
                    {
                        label: 'Confirmé',
                        data: propoConfirme,
                        type: 'bar',
                        backgroundColor: '#FADBD8',
                        borderColor: '#F5B7B1',
                        barThickness: 30,
                        borderWidth: 2,
                        borderRadius: 20,
                        borderSkipped: false,
                    },
                    {
                        label: 'Devis signé',
                        data: devisSigne,
                        type: 'bar',
                        backgroundColor: '#D1F2EB',
                        borderColor: '#A2D9CE',
                        barThickness: 30,
                        borderWidth: 2,
                        borderRadius: 20,
                        borderSkipped: false,
                    }
                ]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            font: {
                                weight: 'bold'
                            },
                        },
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false,
                        },
                    },
                    y: {
                        grid: {
                            display: false,
                        },
                    }
                }
            },
        });
    });
</script>
